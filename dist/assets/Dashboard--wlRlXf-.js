import{$ as le,B as ae,s as oe,a as ne,b as ie,c as re,d as ue,e as de,f as ce,Z as pe,g as ve,h as fe,i as me}from"./index-8sOoJChG.js";import{r as a,o as _e,c as xe,w as j,a as v,b as f,d as t,e as o,f as m,F as Y,g as ge,h as ye,t as p,n as P,i as be,u as V}from"./index-yhk0G4jf.js";const he={class:"flex flex-col"},we={class:"flex flex-wrap justify-center gap-4"},Ve={class:"grid grid-cols-12 gap-0"},ke={class:"p-1 border border-surface-200 dark:border-surface-700 bg-surface-0 dark:bg-surface-900 rounded flex flex-col"},De={class:"bg-surface-50 flex justify-center rounded"},Ce={class:"relative mx-auto"},$e=["src","alt","onClick"],Le={key:0,class:"pi pi-spin pi-clock absolute text-green-500 text-sm",style:{right:"4px",top:"4px"}},Be={class:"pt-4"},Ie={class:"flex flex-row justify-between items-start gap-1"},Ne={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},Se={class:"p-1",style:{"border-radius":"15px"}},Ue={class:"bg-surface-0 flex items-center gap-2 justify-center py-1 px-2",style:{"border-radius":"15px","box-shadow":`0px 1px 2px 0px rgba(0, 0, 0, 0.04),\r
                                                    0px 1px 2px 0px rgba(0, 0, 0, 0.06)`}},Fe={class:"text-surface-900 text-sm"},Te={class:"flex flex-col gap-2"},je={class:"text-sm font-medium mt-3"},Ye={class:"flex flex-col"},Pe={class:"flex items-center justify-between px-6 pt-4 shrink-0"},Ee={class:"inline-flex items-center gap-2"},ze={class:"font-semibold text-md text-primary"},Ae={class:"flex-1 overflow-y-auto",style:{"padding-top":"15px","padding-left":"10px","padding-right":"10px"}},He={key:0},Ke={key:1},Ze={class:"pdf-container",style:{"overflow-y":"auto","max-height":"80vh"}},Me={key:2},We={class:"inline-flex justify-center gap-2",style:{padding:"10px"}},qe={class:"font-semibold text-md text-primary"},Ge={class:"font-semibold text-md text-primary"},Je={class:"mt-auto layout-footer"},Oe={style:{"padding-left":"2px","padding-right":"2px"}},Qe={class:"flex items-center gap-2 mb-8"},Re={class:"flex justify-end gap-2"},st={__name:"Dashboard",setup(Xe){const h=a(null),w=a(null),E=a(null),_=a(null),z=a(null),r=a(1),A=a("grid"),x=a(null),B=a(null),I=a(null),k=a(!1),H=a(12),K=a([{icon:"pi pi-filter-fill",value:"Left"}]),Z=a([{icon:"pi pi-refresh",value:"Left"}]),g=a(!1),D=a(""),C=a(!1),{pdf:M,pages:N}=le(D),$=a([]),d=a({start:null,end:null});_e(()=>{ae.getBerandas().then(s=>{h.value=s,w.value=h.value,E.value=[s,[]],z.value=s;const e=Array.from(new Set(s.map(n=>n.year))).sort((n,u)=>parseInt(n,10)-parseInt(u,10)).map(n=>({name:n,value:n}));$.value=e})});const W=xe(()=>[...$.value].reverse()),q=s=>{const e=new Date(s.replace(" ","T")+":00");return(new Date-e)/(1e3*60*60)<=24},G=(s,e)=>{_.value=s,k.value=!0,r.value=1};j(_,async s=>{s&&s.pdfile&&(C.value=!0,D.value=s.pdfile,C.value=!1)});const J=s=>{switch(s.lang){case"EN":return"success";case"DUTCH":return"warn";case"ID":return"danger";default:return null}},O=()=>{g.value=!0};j(x,s=>{S()});const S=()=>{let s=h.value;x.value&&(s=s.filter(u=>u.title.toLowerCase().includes(x.value.toLowerCase())));const e=d.value.start?parseInt(d.value.start,10):null,n=d.value.end?parseInt(d.value.end,10):null;(e||n)&&(s=s.filter(u=>{const c=parseInt(u.year,10);return e&&n?c>=e&&c<=n:e?c>=e:n?c<=n:!0})),s=s.sort((u,c)=>parseInt(u.year,10)-parseInt(c.year,10)),w.value=s,g.value=!1},Q=()=>{w.value=h.value,x.value=null,d.value={start:null,end:null}};return(s,e)=>{const n=ie,u=re,c=ne,U=ue,R=oe,X=de,y=ce,ee=ve,F=fe,te=me;return v(),f(Y,null,[t("div",he,[o(X,{value:w.value,layout:A.value,paginator:!0,rows:H.value},{header:m(()=>[t("div",we,[o(c,null,{default:m(()=>[o(n,{class:"pi pi-search"}),o(u,{modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=l=>x.value=l),placeholder:"Search"},null,8,["modelValue"])]),_:1}),o(U,{modelValue:I.value,"onUpdate:modelValue":e[1]||(e[1]=l=>I.value=l),options:Z.value,onChange:Q,optionLabel:"value",dataKey:"value"},{option:m(l=>[t("i",{class:P(l.option.icon)},null,2)]),_:1},8,["modelValue","options"]),o(U,{modelValue:B.value,"onUpdate:modelValue":e[2]||(e[2]=l=>B.value=l),options:K.value,onChange:O,optionLabel:"value",dataKey:"value","aria-labelledby":"custom"},{option:m(l=>[t("i",{class:P(l.option.icon)},null,2)]),_:1},8,["modelValue","options"])])]),grid:m(l=>[t("div",Ve,[(v(!0),f(Y,null,ge(l.items,(i,b)=>(v(),f("div",{key:b,class:"col-span-6 sm:col-span-3 lg:col-span-2 p-2"},[t("div",ke,[t("div",De,[t("div",Ce,[t("img",{class:"rounded w-full",src:`${i.image}`,alt:i.title,style:{"max-width":"100%"},onClick:L=>G(i,b)},null,8,$e),q(i.datetime)?(v(),f("span",Le)):ye("",!0),o(R,{value:i.lang,severity:J(i),class:"absolute dark:!bg-surface-900",style:{left:"4px",top:"4px"}},null,8,["value","severity"])])]),t("div",Be,[t("div",Ie,[t("div",null,[t("span",Ne,p(i.category),1)]),t("div",Se,[t("div",Ue,[t("span",Fe,p(i.year),1)])])]),t("div",Te,[t("div",je,p(i.title),1)])])])]))),128))])]),_:1},8,["value","layout","rows"])]),o(ee,{visible:k.value,"onUpdate:visible":e[5]||(e[5]=l=>k.value=l),position:"top",style:{height:"100%"}},{container:m(({closeCallback:l})=>{var i,b,L,T;return[t("div",Ye,[t("div",Pe,[t("span",Ee,[t("span",ze,p(((i=_.value)==null?void 0:i.title)||"No Title"),1)]),t("span",null,[o(y,{type:"button",onClick:l,icon:"pi pi-times",rounded:"",outlined:""},null,8,["onClick"])])])]),t("div",Ae,[C.value?(v(),f("div",He,e[10]||(e[10]=[t("p",{class:"text-center"},[t("i",{class:"pi pi-spin pi-spinner",style:{"font-size":"2rem"}}),t("br"),be("Loading PDF... ")],-1)]))):D.value&&((b=_.value)!=null&&b.pdfile)?(v(),f("div",Ke,[t("div",Ze,[o(V(pe),{pdf:V(M),page:r.value,"fit-parent":"",onLoaded:s.onLoaded},null,8,["pdf","page","onLoaded"])])])):(v(),f("div",Me,e[11]||(e[11]=[t("p",{class:"text-center"},"PDF not available for this item.",-1)])))]),t("span",We,[t("span",qe,"Author : "+p(((L=_.value)==null?void 0:L.author)||"No Title")+",",1),t("span",Ge,p(((T=_.value)==null?void 0:T.year)||"No Title"),1)]),t("div",Je,[o(y,{rounded:"",label:"Prev",icon:"pi pi-arrow-left",outlined:"",onClick:e[3]||(e[3]=se=>r.value=r.value>1?r.value-1:r.value)}),t("span",Oe,p(r.value)+" / "+p(V(N)),1),o(y,{rounded:"",label:"Next",icon:"pi pi-arrow-right",outlined:"",onClick:e[4]||(e[4]=se=>r.value=r.value<V(N)?r.value+1:r.value)})])]}),_:1},8,["visible"]),o(te,{visible:g.value,"onUpdate:visible":e[9]||(e[9]=l=>g.value=l),modal:"",header:"Filter Data",style:{width:"25rem"}},{default:m(()=>[t("div",Qe,[o(F,{modelValue:d.value.start,"onUpdate:modelValue":e[6]||(e[6]=l=>d.value.start=l),options:$.value,optionLabel:"name",optionValue:"value",placeholder:"Start Year",class:"w-full md:w-56"},null,8,["modelValue","options"]),e[12]||(e[12]=t("span",{class:"text-surface-500"},"to",-1)),o(F,{modelValue:d.value.end,"onUpdate:modelValue":e[7]||(e[7]=l=>d.value.end=l),options:W.value,optionLabel:"name",optionValue:"value",placeholder:"End Year",class:"w-full md:w-56"},null,8,["modelValue","options"])]),t("div",Re,[o(y,{type:"button",label:"Batal",severity:"secondary",onClick:e[8]||(e[8]=l=>g.value=!1)}),o(y,{type:"button",label:"Filter",onClick:S})])]),_:1},8,["visible"])],64)}}};export{st as default};
